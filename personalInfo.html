<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
      body {
        padding: 40px;
      }
      .form-container {
  
      }
    </style>
  </head>
   <body>
    <div>
      <span>DATE: <?= date ?></span><br>
      <span>TIME: <?= time ?></span><br>
      <span>SEATS: <?= seats ?></span><br>

    </div>
    <form class="form-container row g-3">
      <div class="col-md-6">
        <input id="firstName" type="text" class="form-control" placeholder="First name">
      </div>
      <div class="col-md-6">
        <input id="lastName" type="text" class="form-control" placeholder="Last name">
      </div>
      <div class="col-md-6">
        <input id="phone" type="tel" class="form-control" placeholder="Phone">
      </div>
      <div class="col-md-6">
        <input id="email" type="email" class="form-control" placeholder="Email">
      </div>
      <div class="col-md-6">
        <input id="notes" type="text" class="form-control" placeholder="Add a special request (optional)">
      </div>
      <div class="col-12">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="check1">
          <label class="form-check-label" for="check1">
            I understand that the seat will be served in the table
          </label>
        </div>
      </div>
      <div class="col-12">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="check2">
          <label class="form-check-label" for="check2">
            Please indicate the ages of your children in the request box
          </label>
        </div>
      </div>
      <div class="col-12">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="check3">
          <label class="form-check-label" for="check3">
            Please indicate any alergies in the request box
          </label>
        </div>
      </div>
      <div class="col-md-6">
        <button onclick="submitReservation()" type="button" class="btn btn-dark">Complete reservation</button>
      </div>
    </form>
    <input type="hidden" value="<?= date ?>" id="date" />
    <input type="hidden" value="<?= time ?>" id="time" />
    <input type="hidden" value="<?= seats ?>" id="seats" />
    <!-- <input type="button" value="Back to Main Menu" onclick="Back()" /><br> -->
    <!-- <span>DATE: <?= date ?></span><br> -->
    <!-- <?var url = getUrl();?><input type="hidden" value="<?= url ?>" id="url" /> -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
     function Back() {  
       var url = document.getElementById("url").value;
       var link = document.createElement('a');
       link.href = url+"?page=reservationForm&message=Back From Link 1";
       link.id = 'linkURL';
       document.body.appendChild(link);
       document.getElementById("linkURL").click();
     }

     const submitReservation = () => {
        // const name = 'Noda';
        const firstName = $("#firstName").val();
        const lastName = $("#lastName").val();
        const date = $("#date").val();
        const time = $("#time").val();
        const seats = $("#seats").val();
        const isTable = false;
        const notes = $("#notes").val();
        const email = $("#email").val();
        const phone = $("#phone").val();
        const timeStamp = Date.now();
        const dataToSend = {
          firstName, lastName, date, time, seats, isTable, notes, email, phone, timeStamp,
        }
        google.script.run.withSuccessHandler(slotBooked)
          .addReservation(dataToSend);
        console.log(dataToSend);
        console.log('form submitted');
      }

      const slotBooked = (error) => {
        
      }
     </script>  
   </body>
</html>